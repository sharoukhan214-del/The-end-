<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNAY3Y PRO | Ø§Ù„Ù…Ù†ØµØ© Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Cairo', sans-serif; background-color: #020617; color: white; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.05); }
        .tab-btn.active { border-bottom: 3px solid #f59e0b; color: #f59e0b; }
    </style>
</head>
<body>

    <header class="p-6 text-center border-b border-slate-900 shadow-xl">
        <h1 id="logo" class="text-3xl font-black text-amber-500 cursor-pointer select-none">SNAY3Y PRO</h1>
        <div id="nav-tabs" class="flex justify-center gap-6 mt-4 text-sm font-bold">
            <button onclick="showSection('client')" id="btn-client" class="tab-btn active pb-2">Ø£Ù†Ø§ Ø¹Ù…ÙŠÙ„</button>
            <button onclick="showSection('worker')" id="btn-worker" class="tab-btn pb-2">Ø£Ù†Ø§ ÙÙ†ÙŠ</button>
        </div>
    </header>

    <main class="p-4 max-w-md mx-auto">
        
        <section id="client-section" class="space-y-6">
            <div class="glass p-6 rounded-[2.5rem] shadow-2xl mt-4">
                <h2 class="text-xl font-bold mb-4 text-center text-amber-500">Ø§Ø·Ù„Ø¨ ØµÙ†Ø§ÙŠØ¹ÙŠ ÙÙŠ Ø«ÙˆØ§Ù†ÙŠ</h2>
                <div class="space-y-4">
                    <input id="customerName" type="text" placeholder="Ø§Ø³Ù…Ùƒ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„" class="w-full p-4 bg-slate-800 rounded-2xl border border-slate-700 outline-none focus:border-amber-500 transition">
                    <select id="serviceType" class="w-full p-4 bg-slate-800 rounded-2xl border border-slate-700 outline-none">
                        <option>Ø³Ø¨Ø§Ùƒ Ù…Ø­ØªØ±Ù</option>
                        <option>ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ ÙÙˆØ±ÙŠ</option>
                        <option>ÙÙ†ÙŠ ØªÙƒÙŠÙŠÙ</option>
                        <option>Ù†Ù‚Ø§Ø´ Ù…Ù…ØªØ§Ø²</option>
                    </select>
                    <button onclick="pushOrder()" class="w-full p-4 bg-amber-500 text-black font-black rounded-2xl shadow-lg shadow-amber-500/20 active:scale-95 transition">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>
                </div>
            </div>
        </section>

        <section id="worker-section" class="hidden space-y-4">
            <h2 class="text-lg font-bold text-center text-green-400 my-4 animate-pulse">ğŸ“¡ Ø¬Ø§Ø±ÙŠ Ø±ØµØ¯ Ø·Ù„Ø¨Ø§Øª ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ...</h2>
            <div id="radar-list" class="space-y-4">
                </div>
        </section>

        <section id="admin-section" class="hidden">
            <div class="bg-amber-500 p-4 rounded-2xl text-black mb-6">
                <h2 class="font-black text-center">Ø®Ø²Ù†Ø© Ø§Ù„Ù…Ø¯ÙŠØ± ğŸ’°</h2>
                <p class="text-center text-sm">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª: <span id="total-count">0</span></p>
            </div>
            <div id="admin-orders" class="space-y-3"></div>
        </section>

    </main>

    <script>
        // Ø±Ø¨Ø· ÙØ§ÙŠØ±Ø¨ÙŠØ² (Ø¨ÙŠØ§Ù†Ø§ØªÙƒ)
        const firebaseConfig = {
            apiKey: "AIzaSyBp6XDnQj80f1B1c5hW", 
            databaseURL: "https://snay3y-pro-default-rtdb.firebaseio.com",
            projectId: "snay3y-pro",
            appId: "1:505251217272:web:d1e53252f3b0dea049d28d"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø´Ø§Ø´Ø§Øª
        function showSection(type) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            
            if(type === 'client') {
                document.getElementById('client-section').classList.remove('hidden');
                document.getElementById('btn-client').classList.add('active');
            } else {
                document.getElementById('worker-section').classList.remove('hidden');
                document.getElementById('btn-worker').classList.add('active');
            }
        }

        // Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ (Ù„Ù„Ø¹Ù…ÙŠÙ„)
        function pushOrder() {
            const name = document.getElementById('customerName').value;
            const job = document.getElementById('serviceType').value;
            if(!name) return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ø§Ù„Ø£ÙˆÙ„ ÙŠØ§ Ø¨Ø·Ù„");

            db.ref('active_orders').push({
                customer: name,
                service: job,
                time: new Date().toLocaleTimeString(),
                status: 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± ÙÙ†ÙŠ'
            }).then(() => {
                alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨Ùƒ.. Ø®Ù„ÙŠÙƒ ÙØ§ØªØ­ Ø§Ù„ØµÙØ­Ø© Ø§Ù„ØµÙ†Ø§ÙŠØ¹ÙŠØ© Ø¨ÙŠØ±Ø§Ø¬Ø¹ÙˆØ§ Ø·Ù„Ø¨Ùƒ!");
                document.getElementById('customerName').value = "";
            });
        }

        // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø±Ø§Ø¯Ø§Ø± (Ù„Ù„ÙÙ†ÙŠ ÙˆØ§Ù„Ù…Ø¯ÙŠØ±)
        db.ref('active_orders').on('value', (snapshot) => {
            const radar = document.getElementById('radar-list');
            const adminList = document.getElementById('admin-orders');
            const totalCount = document.getElementById('total-count');
            
            radar.innerHTML = "";
            adminList.innerHTML = "";
            let count = 0;

            snapshot.forEach((child) => {
                count++;
                const data = child.val();
                const id = child.key;

                // Ø´ÙƒÙ„ ÙƒØ§Ø±Øª Ø§Ù„ÙÙ†ÙŠ
                radar.innerHTML += `
                    <div class="glass p-5 rounded-3xl border-r-4 border-amber-500">
                        <div class="flex justify-between font-bold mb-2">
                            <span class="text-amber-500">${data.service}</span>
                            <span class="text-xs text-slate-500">${data.time}</span>
                        </div>
                        <p class="mb-4">Ø§Ù„Ø¹Ù…ÙŠÙ„: ${data.customer}</p>
                        <button onclick="acceptOrder('${id}')" class="w-full bg-green-600 p-2 rounded-xl font-bold text-sm">Ù‚Ø¨ÙˆÙ„ ÙˆØªÙˆØ§ØµÙ„</button>
                    </div>
                `;

                // Ø´ÙƒÙ„ ÙƒØ§Ø±Øª Ø§Ù„Ù…Ø¯ÙŠØ±
                adminList.innerHTML += `<div class="p-2 border-b border-slate-800 text-xs">${data.customer} Ø·Ù„Ø¨ ${data.service}</div>`;
            });
            totalCount.innerText = count;
        });

        function acceptOrder(id) {
            alert("Ù…Ø¨Ø±ÙˆÙƒ! Ø¬Ø§Ø±ÙŠ ØªØ­ÙˆÙŠÙ„Ùƒ Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„..");
            db.ref('active_orders/' + id).update({ status: 'Ø§Ù„ÙÙ†ÙŠ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚' });
        }

        // Ø§Ù„Ø­Ø±ÙƒØ© Ø§Ù„Ø³Ø±ÙŠØ© (Ø§Ù„Ù…Ø¯ÙŠØ±)
        let secret = 0;
        document.getElementById('logo').onclick = () => {
            secret++;
            if(secret === 5) {
                const p = prompt("ÙƒÙ„Ù…Ø© Ø³Ø± Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©:");
                if(p === "Mohamed214@") {
                    document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
                    document.getElementById('admin-section').classList.remove('hidden');
                    document.getElementById('nav-tabs').classList.add('hidden');
                    alert("Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙŠØ§ Ù…Ø¯ÙŠØ±. Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø¥Ø´Ø±Ø§Ù.");
                }
                secret = 0;
            }
        };
    </script>
</body>
</html>
